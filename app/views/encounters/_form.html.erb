


<%= simple_form_for @encounter, method: :post, remote: true do |f| %>
  <%= f.text_field :patient_name, placeholder: 'Patient Name' %>
  <%= f.text_field :insurance_provider, placeholder: 'Insurance Provider' %>
  <%#= f.text_field :primary_md, placeholder: 'Primary MD' %>
  <%= f.text_field :notes, placeholder: 'Notes' %>
  <%= f.association :procedure, label_method: :description, label: 'Procedure Description' %>
  <%= f.button :submit, 'Add Encounter', class: 'button radius' %>
<% end %>

<div id='encounters'>
  <table>
    <thead>
      <tr>
        <th>Patient Name</th>
        <th>Procedure Description</th>
        <th>HCPCS Code</th>
        <th>Work RVU</th>
        <th>Physician Fee</th>
      </tr>
    </thead>
    <tbody>
      <%= render @encounters %>
      <tr>
        <th>Total</th>
        <td colspan="2"></td>
        <td><%= @encounters.joins(:procedure).sum(:work_rvu) %></td>
        <td><%= @encounters.sum(:physician_fee) %></td>
      </tr>
    </tbody>
  </table>
</div>

